
WHAT=windows

all:: all-$(WHAT)

clean:: clean-$(WHAT)

install:: install-$(WHAT)

check:: check-$(WHAT)

all-windows::
clean-windows::
install-windows::
check-windows::


# Directory syntax:
R=\		# root
C=.\		# current
S=\		# seperator
U=..\		# up one level

srcdir = .
SRCTOP = $(srcdir)\$(BUILDTOP)

# /* The name of the C compiler for the target */
CC=cl /nologo
CL=
#
# CCOPTS for DLL functions
#
##WIN16##CCOPTS=/ALw /Zp /GD2s /Os /Zi /Od /W3 /Ld $(XTRA) /DKRB5_DLL_FILE
##WIN32##CCOPTS=/Os /Zi /Od /W3 /MD $(XTRA) -DKRB5_DLL_FILE
#
# CCOPTS for non-DLL compiles
#
##WIN16##CCOPTS2=/AL /Zp /G2s  /Os /Zi /Od /W3 -DINTERFACE= -DINTERFACE_C= $(XTRA)
##WIN32##CCOPTS2=/Os /Zi /Od /W3 -DINTERFACE= -DINTERFACE_C= $(XTRA)
CPPFLAGS =  -I$(SRCTOP)\include -I$(SRCTOP)\include\krb5
DEFS = $(CPPFLAGS)
CFLAGS2 = $(CCOPTS2) $(DEFS)

# /Zi gives debug info in each object file.
# /Zp packs structures: Required for Windows API (but is not default!!!)
# /Za strict ansi compliance
# /ALw memory model:  Large model for Windows DLL (SS != DS)
# /GD DLL code generation for Windows 3.0 and up, and defines _WINDOWS
# /Gs Avoid stack probes (they don't seem to work anyway)
# /Os optimize for space.  FIXME:  Do not use /Ox; it miscompiles the DES lib!
# /G2 generate 286 instructions (it complains if you ask for 386!)
# /Od disable optimization (for debugging)

DBG_LIB=/nologo /Zp /ALw /GD /Gs /Os /G2 /Zi /Od
# /Zi gives debug info in each object file.
# /Zp packs structures: Required for Windows API (but is not default!!!)
# /AL large memory model
# /Mq quickwin ascii stdio window, and defines _WINDOWS
DBG=/nologo /Zp /AL /Os /Mq /Zi /Od

RM=$(BUILDTOP)\config\rm.bat
LIBECHO=$(BUILDTOP)\util\windows\libecho
CP=copy
MV=ren
LN=copy
LIBCMD=lib
PAGESIZE=/pagesize:128
AWK=rem
RC = rc
CVTRES = cvtres

##WIN16##KLIB=$(BUILDTOP)\lib\krb5_16.lib
##WIN32##KLIB=$(BUILDTOP)\lib\krb5_32.lib
##WIN16##GLIB=$(BUILDTOP)\lib\gssapi.lib
##WIN32##GLIB=$(BUILDTOP)\lib\gssapi32.lib

ARADD=rem
RANLIB=rem
ARCHIVE=rem

LIBEXT=lib
OBJEXT=obj
EXEEXT=.exe

MFLAGS=$(MAKEFLAGS)

#
# End of Microsoft Windows config lines
#

