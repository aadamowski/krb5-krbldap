K5_AC_INIT(configure.in)
CONFIG_RULES
AC_CHECK_HEADERS(unistd.h)
AC_TYPE_MODE_T
AC_TYPE_OFF_T

AC_CHECK_FUNCS(srand48 srand srandom umask)

OPENLDAP=1
AC_CHECK_HEADERS([ldap.h], :, [OPENLDAP=0; AC_MSG_WARN([ldap.h not found])])
AC_CHECK_HEADERS([lber.h], :, [OPENLDAP=0; AC_MSG_WARN([lber.h not found])])
AC_CHECK_LIB(ldap, ldap_init, :, [OPENLDAP=0; AC_MSG_WARN([libldap not found])])
AC_CHECK_LIB(lber, ber_init, :, [OPENLDAP=0; AC_MSG_WARN([liblber not found])])

if test "$OPENLDAP" = "0"; then 
    AC_ERROR("OPENLDAP libraries missing Skipping openldap database module")
fi


KRB5_RUN_FLAGS
dnl The following is for check...
KRB5_BUILD_PROGRAM
KRB5_BUILD_LIBOBJS
KRB5_BUILD_LIBRARY_WITH_DEPS
dnl
V5_AC_OUTPUT_MAKEFILE
