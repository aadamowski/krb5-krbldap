thisconfigdir=../../../..
myfulldir=lib/crypto/builtin/aes
mydir=lib/crypto/builtin/aes
BUILDTOP=$(REL)..$(S)..$(S)..$(S)..
LOCALINCLUDES = -I$(srcdir)/.. -I$(srcdir)/../../krb/dk  -I$(srcdir)/../../../../include
DEFS=

##DOS##BUILDTOP = ..\..\..\..
##DOS##PREFIXDIR=aes
##DOS##OBJFILE=..\$(OUTPRE)aes.lst

PROG_LIBPATH=-L$(TOPLIBD)
PROG_RPATH=$(KRB5_LIBDIR)

CIMPL = @CRYPTO_IMPL@/aes

STLIBOBJS=\
	../../$(CIMPL)/aescrypt.o	\
	../../$(CIMPL)/aestab.o	\
	../../$(CIMPL)/aeskey.o	\
	../../$(CIMPL)/aes_s2k.o

OBJS=\
	$(OUTPRE)../../$(CIMPL)/aescrypt.$(OBJEXT)	\
	$(OUTPRE)../../$(CIMPL)/aestab.$(OBJEXT)	\
	$(OUTPRE)../../$(CIMPL)/aeskey.$(OBJEXT)	\
	$(OUTPRE)../../$(CIMPL)/aes_s2k.$(OBJEXT)

SRCS=\
	$(srcdir)/../../$(CIMPL)/aescrypt.c	\
	$(srcdir)/../../$(CIMPL)/aestab.c	\
	$(srcdir)/../../$(CIMPL)/aeskey.c	\
	$(srcdir)/../../$(CIMPL)/aes_s2k.c

GEN_OBJS=\
	$(OUTPRE)../../$(CIMPL)/aescrypt.$(OBJEXT)	\
	$(OUTPRE)../../$(CIMPL)/aestab.$(OBJEXT)	\
	$(OUTPRE)../../$(CIMPL)/aeskey.$(OBJEXT)

##DOS##LIBOBJS = $(OBJS)

all-unix:: all-libobjs # aes-gen

includes:: depend

depend:: $(SRCS)

../../$(CIMPL)/aes-gen: ../../$(CIMPL)/aes-gen.o $(GEN_OBJS)
	$(CC_LINK) -I../../../../include $(LOCALINCLUDES) -o ../../$(CIMPL)/aes-gen ../../$(CIMPL)/aes-gen.o $(GEN_OBJS)

run-aes-gen: ../../$(CIMPL)/aes-gen
	../../$(CIMPL)/aes-gen > kresults.out

check:: run-aes-gen


clean-unix:: clean-libobjs

clean::
	-$(RM) ../../$(CIMPL)/aes-gen ../../$(CIMPL)/aes-gen.o ../../$(CIMPL)/kresults.out

@libobj_frag@

