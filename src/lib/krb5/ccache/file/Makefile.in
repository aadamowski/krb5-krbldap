CFLAGS = $(CCOPTS) $(DEFS)

##DOSBUILDTOP = ..\..\..\..
##DOSMYNAME = ccache\file
##DOSOBJFILE = file.lst

.c.o:
	$(CC) $(CFLAGS) -c $(srcdir)/$*.c
@SHARED_RULE@

OBJS 	= fcc_close.$(OBJEXT) fcc_destry.$(OBJEXT) fcc_eseq.$(OBJEXT) \
	fcc_gennew.$(OBJEXT) fcc_getnam.$(OBJEXT) fcc_gprin.$(OBJEXT) \
	fcc_init.$(OBJEXT) fcc_nseq.$(OBJEXT) fcc_read.$(OBJEXT) \
	fcc_reslv.$(OBJEXT) fcc_retrv.$(OBJEXT) fcc_sseq.$(OBJEXT) \
	fcc_store.$(OBJEXT) fcc_skip.$(OBJEXT) fcc_ops.$(OBJEXT) \
	fcc_write.$(OBJEXT) fcc_sflags.$(OBJEXT) fcc_defops.$(OBJEXT) \
	fcc_errs.$(OBJEXT) fcc_maybe.$(OBJEXT)

SRCS 	= $(srcdir)/fcc_close.c $(srcdir)/fcc_destry.c $(srcdir)/fcc_eseq.c \
	$(srcdir)/fcc_gennew.c $(srcdir)/fcc_getnam.c $(srcdir)/fcc_gprin.c \
	$(srcdir)/fcc_init.c $(srcdir)/fcc_nseq.c $(srcdir)/fcc_read.c      \
	$(srcdir)/fcc_reslv.c $(srcdir)/fcc_retrv.c $(srcdir)/fcc_sseq.c    \
	$(srcdir)/fcc_store.c $(srcdir)/fcc_skip.c $(srcdir)/fcc_ops.c      \
	$(srcdir)/fcc_write.c $(srcdir)/fcc_sflags.c $(srcdir)/fcc_defops.c \
	$(srcdir)/fcc_errs.c $(srcdir)/fcc_maybe.c

all-unix:: shared $(OBJS)
all-mac:: $(OBJS)
all-windows:: $(OBJFILE)

##DOS$(OBJFILE): $(OBJS)
##DOS	$(RM) $(OBJFILE)
##DOS	$(LIBECHO) -p $(MYNAME)\ *.obj > $(OBJFILE)

shared: 
	mkdir shared

clean-unix::
	$(RM) shared/*

clean-mac::
clean-windows::
	$(RM) $(OBJFILE)
