BUILDTOP=./../../$(top_dir)
SRCTOP=$(top_srcdir)/../..

SUBDIRS=file stdio memory

CFLAGS = $(CCOPTS) $(DEFS) -I$(srcdir)$(S)file -I$(srcdir)$(S)stdio

##DOSBUILDTOP = ..\..\..
##DOSLIBNAME=..\krb5.lib

MAC_SUBDIRS = file stdio

.c.o:
	$(CC) $(CFLAGS) -c $(srcdir)/$*.c
@SHARED_RULE@

OBJS=	ccbase.$(OBJEXT) \
	ccdefault.$(OBJEXT) \
	ccdefops.$(OBJEXT) \
	ser_cc.$(OBJEXT)

SRCS=	$(srcdir)/ccbase.c \
	$(srcdir)/ccdefault.c \
	$(srcdir)/ccdefops.c \
	$(srcdir)/ser_cc.c

all-unix:: shared $(OBJS) DONE

DONE: $(OBJS)
	@echo $(OBJS) > DONE

all-mac:: $(OBJS) 
all-windows:: $(OBJS) 
	cd FILE
	@echo Making in ccache\file
	-$(MAKE) -$(MFLAGS)
	cd ..

shared: 
	mkdir shared

clean-unix::
	$(RM) shared/*

clean-mac:
clean-windows::
	cd FILE
	@echo Making clean in ccache\file
	-$(MAKE) -$(MFLAGS) clean
	cd ..
	@echo Making clean locally
