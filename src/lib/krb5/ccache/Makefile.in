thisconfigdir=./..
BUILDTOP=$(REL)$(U)$(S)$(U)$(S)$(U)
LOCAL_SUBDIRS = stdio file memory

CFLAGS = $(CCOPTS) $(DEFS) -I$(srcdir)$(S)file -I$(srcdir)$(S)stdio

##DOS##BUILDTOP = ..\..\..
##DOS##PREFIXDIR=ccache
##DOS##OBJFILE=..\$(PREFIXDIR).lst
##WIN16##LIBNAME=..\krb5.lib

MAC_SUBDIRS = file stdio memory ccapi

STLIBOBJS= \
	ccbase.o \
	cccopy.o \
	ccdefault.o \
	ccdefops.o \
	ser_cc.o

OBJS=	ccbase.$(OBJEXT) \
	cccopy.$(OBJEXT) \
	ccdefault.$(OBJEXT) \
	ccdefops.$(OBJEXT) \
	ser_cc.$(OBJEXT)

SRCS=	$(srcdir)/ccbase.c \
	$(srcdir)/cccopy.c \
	$(srcdir)/ccdefault.c \
	$(srcdir)/ccdefops.c \
	$(srcdir)/ser_cc.c

all-unix:: all-libobjs

all-windows:: subdirs $(OBJFILE) 

##DOSsubdirs:: file\file.lst memory\file.lst ccapi\file.lst
##DOS
##DOSfile\file.lst::
##DOS	cd file
##DOS	@echo Making in krb5\ccache\file
##DOS	-$(MAKE) -$(MFLAGS)
##DOS	cd ..

##DOSmemory\file.lst::
##DOS	cd memory
##DOS	@echo Making in krb5\ccache\memory
##DOS	-$(MAKE) -$(MFLAGS)
##DOS	cd ..

##DOSccapi\file.lst::
##DOS	cd ccapi
##DOS	@echo Making in krb5\ccache\ccapi
##DOS	-$(MAKE) -$(MFLAGS)
##DOS	cd ..

##DOS$(OBJFILE): $(OBJS) file\file.lst memory\file.lst ccapi\file.lst
##DOS	$(RM) $(OBJFILE)
##WIN16##	$(CP) nul: $(OBJFILE)
##WIN32##	$(LIBECHO) -p $(PREFIXDIR)\ *.obj file\*.obj memory\*.obj \
##WIN32##		ccapi\*.obj > $(OBJFILE)

clean-unix:: clean-libobjs

clean-windows::
	cd file
	@echo Making clean in krb5\ccache\file
	-$(MAKE) -$(MFLAGS) clean
	cd ..\memory
	@echo Making clean in krb5\ccache\memory
	-$(MAKE) -$(MFLAGS) clean
	cd ..
	@echo Making clean in krb5\ccache
	$(RM) $(OBJFILE)
