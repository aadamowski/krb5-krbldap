CFLAGS=$(CCOPTS) $(DEFS)

##DOSBUILDTOP = ..\..\..
##DOSMYDIR=asn.1
##DOSOBJFILE=..\asn1.lst
##WIN16##LIBNAME=..\krb5.lib

EHDRDIR=$(BUILDTOP)/include/krb5/asn.1

.c.o:
	$(CC) $(CFLAGS) -c $(srcdir)/$*.c
@SHARED_RULE@

SRCS= \
	$(srcdir)asn1_decode.c\
	$(srcdir)asn1_k_decode.c\
	$(srcdir)asn1_encode.c\
	$(srcdir)asn1_get.c\
	$(srcdir)asn1_make.c\
	$(srcdir)asn1buf.c\
	$(srcdir)krb5_decode.c\
	$(srcdir)krb5_encode.c\
	$(srcdir)asn1_k_encode.c\
	$(srcdir)asn1_misc.c

OBJS= \
	asn1_decode.$(OBJEXT)\
	asn1_k_decode.$(OBJEXT)\
	asn1_encode.$(OBJEXT)\
	asn1_get.$(OBJEXT)\
	asn1_make.$(OBJEXT)\
	asn1buf.$(OBJEXT)\
	krb5_decode.$(OBJEXT)\
	krb5_encode.$(OBJEXT)\
	asn1_k_encode.$(OBJEXT)\
	asn1_misc.$(OBJEXT)

all-unix:: shared $(OBJS)
all-mac::  $(OBJS)
all-windows:: $(OBJFILE)

##DOS$(OBJFILE): $(OBJS)
##DOS	$(RM) $(OBJFILE)
##WIN16##	$(CP) nul: $(OBJFILE)
##WIN32##	$(LIBECHO) -p $(MYDIR)\ *.obj > $(OBJFILE)

shared:
	mkdir shared

clean-unix::
	$(RM) shared/* $(OBJS)

clean-mac::
	$(RM) $(OBJS)

clean-windows::
	$(RM) $(OBJFILE)
