CFLAGS = $(CCOPTS) $(DEFS)

##DOSBUILDTOP = ..\..\..\..
##DOSMYNAME=keytab\file
##DOSOBJFILE= file.lst

.c.o:
	$(CC) $(CFLAGS) -c $(srcdir)/$*.c
@SHARED_RULE@

SRCS= \
	$(srcdir)/ktf_add.c \
	$(srcdir)/ktf_endget.c \
	$(srcdir)/ktf_next.c \
	$(srcdir)/ktf_resolv.c \
	$(srcdir)/ktf_wops.c \
	$(srcdir)/ktf_close.c \
	$(srcdir)/ktf_g_ent.c \
	$(srcdir)/ktf_ops.c \
	$(srcdir)/ktf_ssget.c \
	$(srcdir)/ktf_wreslv.c \
	$(srcdir)/ktf_defops.c \
	$(srcdir)/ktf_g_name.c \
	$(srcdir)/ktf_remove.c \
	$(srcdir)/ktf_util.c \
	$(srcdir)/ser_ktf.c

OBJS = \
	ktf_add.$(OBJEXT)	\
	ktf_close.$(OBJEXT)	\
	ktf_endget.$(OBJEXT)	\
	ktf_g_ent.$(OBJEXT)	\
	ktf_g_name.$(OBJEXT)	\
	ktf_next.$(OBJEXT)	\
	ktf_resolv.$(OBJEXT)	\
	ktf_remove.$(OBJEXT)	\
	ktf_ssget.$(OBJEXT)	\
	ktf_util.$(OBJEXT)	\
	ktf_ops.$(OBJEXT)	\
	ktf_wops.$(OBJEXT)	\
	ktf_wreslv.$(OBJEXT)	\
	ktf_defops.$(OBJEXT)	\
	ser_ktf.$(OBJEXT)

all-unix:: shared $(OBJS)
all-mac:: $(OBJS)
all-windows:: $(OBJFILE)

##DOS$(OBJFILE):: $(OBJS)
##DOS	$(RM) $(OBJFILE)
##DOS	$(LIBECHO) -p $(MYNAME)\ *.obj > $(OBJFILE)

shared:
	mkdir shared

clean-unix::
	$(RM) shared/*

clean-mac::
clean-windows::
	$(RM) $(OBJFILE)
